"use client";
import React, { useState } from "react";
import Image from "next/image";
import { CommentT } from "@/types";

type CommentsT = {
  data: CommentT;
};

const Comments = ({ data }: CommentsT) => {
  const [show, setShow] = useState(false);

  return (
    <div className="p-5  relative">
      {show && (
        <div className="absolute vertical-bar top-[3.7rem] left-10 w-[1px] bg-[#ABABAB66]" />
      )}

      <div className="head flex justify-between items-center">
        <div className="flex gap-2">
          <div
            style={{
              backgroundColor: data.color,
            }}
            className="w-10 h-10 text-white border flex justify-center items-center  rounded-full text-xl font-bold"
          >
            {data.name[0]}
          </div>
          <div className="">
            <p className="text-base font-semibold">{data.name}</p>
            <p className="text-xs text-gray-300">{data.time}</p>
          </div>
        </div>
        <div className="flex gap-2 items-center">
          <div className="">
            <Image
              width={20}
              height={20}
              src="/assets/icons/eye.png"
              alt="views"
            />{" "}
          </div>
          <span className="text-sm font-semibold">125</span>
        </div>
      </div>

      <div className="ml-10">
        <p className="mt-4 text-sm text-[#3A3A3A]">{data.comment}</p>

        <div className="footer mt-3 flex justify-between">
          <div className="flex items-center gap-5">
            <div className="bg-[#F9F9F9] flex  gap-2 w-fit py-1 px-4 rounded-full">
              <div className="flex gap-2 items-center">
                <div className="">
                  <Image
                    width={16}
                    height={16}
                    src="/assets/icons/upload.png"
                    alt="views"
                  />{" "}
                </div>
                <span className="text-xs font-semibold">100</span>
              </div>
              <span className="text-[#CFCFCF]">|</span>

              <div className="flex gap-2 items-center">
                <div className="">
                  <Image
                    width={16}
                    height={16}
                    src="/assets/icons/download.png"
                    alt="views"
                  />{" "}
                </div>
                <span className="text-xs font-semibold">13</span>
              </div>
            </div>

            <div className="flex items-center gap-2 cursor-pointer">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.97374 0.833336H9.02622C10.0951 0.833332 10.9331 0.833328 11.6026 0.896981C12.2849 0.961861 12.8437 1.09638 13.3362 1.39822C13.852 1.7143 14.2857 2.14796 14.6018 2.66376C14.9036 3.15631 15.0381 3.71504 15.103 4.39741C15.1667 5.06686 15.1666 5.90484 15.1666 6.97375V7.68523C15.1666 8.44609 15.1666 9.04265 15.1338 9.52456C15.1003 10.0149 15.0312 10.4229 14.8749 10.8003C14.4858 11.7396 13.7395 12.4858 12.8003 12.8749C12.2636 13.0972 11.6524 13.1465 10.8155 13.1609C10.5228 13.1659 10.3374 13.1696 10.196 13.1853C10.064 13.1999 10.0128 13.2214 9.9828 13.2388C9.9512 13.2572 9.90814 13.2907 9.83338 13.3932C9.75247 13.5042 9.66105 13.6577 9.51609 13.9026L9.15469 14.5131C8.63897 15.3844 7.36096 15.3844 6.84524 14.5131L6.48384 13.9026C6.33888 13.6577 6.24746 13.5042 6.16655 13.3932C6.09179 13.2907 6.04873 13.2572 6.01713 13.2388C5.98717 13.2214 5.93597 13.1999 5.8039 13.1853C5.66256 13.1696 5.47715 13.1659 5.18442 13.1609C4.34756 13.1465 3.73634 13.0972 3.19969 12.8749C2.26042 12.4858 1.51417 11.7396 1.12511 10.8003C0.968799 10.4229 0.899644 10.0149 0.86619 9.52456C0.833309 9.04265 0.833311 8.44609 0.833313 7.68523L0.833313 6.97377C0.833309 5.90484 0.833306 5.06686 0.896958 4.39741C0.961838 3.71504 1.09636 3.15631 1.39819 2.66376C1.71427 2.14796 2.14794 1.7143 2.66373 1.39822C3.15628 1.09638 3.71502 0.961861 4.39738 0.896981C5.06684 0.833328 5.90482 0.833332 6.97374 0.833336ZM4.49204 1.89249C3.88287 1.95041 3.49525 2.06149 3.18623 2.25086C2.80499 2.48448 2.48446 2.80502 2.25083 3.18626C2.06147 3.49527 1.95039 3.88289 1.89247 4.49206C1.83384 5.10867 1.83331 5.89918 1.83331 7V7.66667C1.83331 8.45008 1.83358 9.0126 1.86387 9.45649C1.89385 9.89588 1.95156 10.1824 2.04899 10.4176C2.33655 11.1119 2.88813 11.6634 3.58238 11.951C3.92613 12.0934 4.36469 12.1466 5.20165 12.161L5.22286 12.1614C5.48819 12.166 5.7207 12.17 5.91396 12.1914C6.12162 12.2144 6.32472 12.2608 6.51989 12.3744C6.71341 12.4869 6.853 12.6373 6.97468 12.8042C7.08713 12.9585 7.20268 13.1538 7.33356 13.3749L7.70579 14.0038C7.8343 14.2209 8.16563 14.2209 8.29414 14.0038L8.66637 13.3749C8.79725 13.1538 8.9128 12.9585 9.02524 12.8042C9.14693 12.6373 9.28652 12.4869 9.48004 12.3744C9.67522 12.2608 9.87831 12.2144 10.086 12.1914C10.2792 12.17 10.5117 12.166 10.7771 12.1614L10.7983 12.161C11.6353 12.1466 12.0738 12.0934 12.4176 11.951C13.1118 11.6634 13.6634 11.1119 13.951 10.4176C14.0484 10.1824 14.1061 9.89588 14.1361 9.45649C14.1664 9.0126 14.1666 8.45008 14.1666 7.66667V7C14.1666 5.89918 14.1661 5.10867 14.1075 4.49206C14.0496 3.88289 13.9385 3.49527 13.7491 3.18626C13.5155 2.80502 13.195 2.48448 12.8137 2.25086C12.5047 2.06149 12.1171 1.95041 11.5079 1.89249C10.8913 1.83386 10.1008 1.83334 8.99998 1.83334H6.99998C5.89915 1.83334 5.10865 1.83386 4.49204 1.89249Z"
                  fill="#454545"
                />
              </svg>
              <span className="text-xs font-medium text-[#8E8E8E]">Reply</span>
            </div>

            <div
              className="flex items-center gap-2 cursor-pointer"
              onClick={() => {
                if (data.hasComment.length > 0) {
                  setShow((prev) => !prev);
                }
              }}
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M6.97377 0.833336H9.02625C10.0952 0.833332 10.9331 0.833328 11.6026 0.896981C12.285 0.961861 12.8437 1.09638 13.3363 1.39822C13.852 1.7143 14.2857 2.14796 14.6018 2.66376C14.9036 3.15631 15.0382 3.71504 15.103 4.39741C15.1667 5.06686 15.1667 5.90484 15.1667 6.97375V7.68523C15.1667 8.44609 15.1667 9.04265 15.1338 9.52456C15.1003 10.0149 15.0312 10.4229 14.8749 10.8003C14.4858 11.7396 13.7396 12.4858 12.8003 12.8749C12.2636 13.0972 11.6524 13.1465 10.8155 13.1609C10.5228 13.1659 10.3374 13.1696 10.1961 13.1853C10.064 13.1999 10.0128 13.2214 9.98283 13.2388C9.95123 13.2572 9.90817 13.2907 9.83341 13.3932C9.75251 13.5042 9.66109 13.6577 9.51612 13.9026L9.15472 14.5131C8.639 15.3844 7.36099 15.3844 6.84527 14.5131L6.48387 13.9026C6.33891 13.6577 6.24749 13.5042 6.16658 13.3932C6.09182 13.2907 6.04876 13.2572 6.01716 13.2388C5.9872 13.2214 5.936 13.1999 5.80393 13.1853C5.66259 13.1696 5.47718 13.1659 5.18445 13.1609C4.34759 13.1465 3.73637 13.0972 3.19972 12.8749C2.26045 12.4858 1.5142 11.7396 1.12514 10.8003C0.96883 10.4229 0.899674 10.0149 0.86622 9.52456C0.83334 9.04265 0.833341 8.44609 0.833344 7.68523L0.833344 6.97377C0.833339 5.90484 0.833336 5.06686 0.896988 4.39741C0.961868 3.71504 1.09639 3.15631 1.39822 2.66376C1.7143 2.14796 2.14797 1.7143 2.66377 1.39822C3.15631 1.09638 3.71505 0.961861 4.39741 0.896981C5.06687 0.833328 5.90485 0.833332 6.97377 0.833336ZM4.49207 1.89249C3.8829 1.95041 3.49528 2.06149 3.18626 2.25086C2.80502 2.48448 2.48449 2.80502 2.25086 3.18626C2.0615 3.49527 1.95042 3.88289 1.8925 4.49206C1.83387 5.10867 1.83334 5.89918 1.83334 7V7.66667C1.83334 8.45008 1.83361 9.0126 1.8639 9.45649C1.89388 9.89588 1.95159 10.1824 2.04902 10.4176C2.33658 11.1119 2.88816 11.6634 3.58241 11.951C3.92616 12.0934 4.36472 12.1466 5.20168 12.161L5.22289 12.1614C5.48822 12.166 5.72074 12.17 5.91399 12.1914C6.12165 12.2144 6.32475 12.2608 6.51992 12.3744C6.71344 12.4869 6.85303 12.6373 6.97472 12.8042C7.08716 12.9585 7.20271 13.1538 7.33359 13.3749L7.70582 14.0038C7.83433 14.2209 8.16566 14.2209 8.29417 14.0038L8.6664 13.3749C8.79728 13.1538 8.91284 12.9585 9.02528 12.8042C9.14696 12.6373 9.28655 12.4869 9.48007 12.3744C9.67525 12.2608 9.87834 12.2144 10.086 12.1914C10.2793 12.17 10.5118 12.166 10.7771 12.1614L10.7983 12.161C11.6353 12.1466 12.0739 12.0934 12.4176 11.951C13.1119 11.6634 13.6634 11.1119 13.951 10.4176C14.0484 10.1824 14.1061 9.89588 14.1361 9.45649C14.1664 9.0126 14.1667 8.45008 14.1667 7.66667V7C14.1667 5.89918 14.1661 5.10867 14.1075 4.49206C14.0496 3.88289 13.9385 3.49527 13.7492 3.18626C13.5155 2.80502 13.195 2.48448 12.8138 2.25086C12.5047 2.06149 12.1171 1.95041 11.508 1.89249C10.8913 1.83386 10.1008 1.83334 9.00001 1.83334H7.00001C5.89918 1.83334 5.10868 1.83386 4.49207 1.89249ZM4.83334 6C4.83334 5.72386 5.0572 5.5 5.33334 5.5H10.6667C10.9428 5.5 11.1667 5.72386 11.1667 6C11.1667 6.27614 10.9428 6.5 10.6667 6.5H5.33334C5.0572 6.5 4.83334 6.27614 4.83334 6ZM4.83334 8.33334C4.83334 8.05719 5.0572 7.83334 5.33334 7.83334H9.00001C9.27615 7.83334 9.50001 8.05719 9.50001 8.33334C9.50001 8.60948 9.27615 8.83334 9.00001 8.83334H5.33334C5.0572 8.83334 4.83334 8.60948 4.83334 8.33334Z"
                  fill="#454545"
                />
              </svg>

              <span className="text-xs font-medium text-[#8E8E8E]">
                Hide {`${data.hasComment.length}`} Replies
              </span>
            </div>
          </div>
        </div>
      </div>

      <div className="ml-5">
        {show &&
          data.hasComment.map((comment, index) => {
            return <Comments data={comment} key={index} />;
          })}
      </div>
    </div>
  );
};

export default Comments;
